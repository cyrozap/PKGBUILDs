# Maintainer: Nick Ã˜stergaard <oe.nick at gmail dot com>
pkgname=tilemill
pkgver=0.9.1
pkgrel=2
pkgdesc="A modern map design studio"
arch=(any)
url="https://github.com/mapbox/tilemill"
license=(BSD)
depends=(nodejs6 mapnik-git)
source=(http://registry.npmjs.org/$pkgname/-/$pkgname-$pkgver.tgz)
noextract=($pkgname-$pkgver.tgz)
sha1sums=(f4ac9b8625c108f4acb8a37f6695951cef731617)
build() {
  # nodejs python3 incompatibility hax
  mkdir -p $srcdir/bin
  ln -s -f /usr/bin/python2 $srcdir/bin/python
  export PATH=$srcdir/bin:$PATH
  python --version

  # install the actual tilemill
  cd $srcdir
  local _npmdir="$pkgdir/usr/lib/node_modules/"
  mkdir -p $_npmdir
  cd $_npmdir
  npm install -g --prefix "$pkgdir/usr" $pkgname@$pkgver
}
# vim:set ts=2 sw=2 et:
